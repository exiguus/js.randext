/* !
 * randext 1.0.0
 * https://github.com/exiguus/js.randext.git
 *
 * Simon Gattner <npm@0x38.de>
 * Released under the MIT license
 *
 * Date: 2019-11-05 01:11:14
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Randext=e():t.Randext=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();
var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"options",value:function(t){var e="";switch(!0){case"object"!==(void 0===t?"undefined":r(t)):e="options must be an object";break;case"object"!==r(t.element)||Array.isArray(t):e="options.element must be an non-empty object";break;case"string"!=typeof t.element.innerText:e="options.element.innerText must be a string";break;case"number"!=typeof t.interval&&void 0!==t.interval:e="options.interval must be a number or undefined";break;case"number"==typeof t.interval&&0===t.interval:e="options.interval must be a number > 0 or undefined";break;case"string"!=typeof t.ignore&&void 0!==t.ignore:e="options.ignore must be a string or undefined";break;case"string"==typeof t.ignore&&0===t.ignore.trim().length:e="options.ignore must be a string > 0 or undefined";break;case!Array.isArray(t.style)&&void 0!==t.style:e="options.style must be an array or undefined";break;case Array.isArray(t.style)&&0===t.style.length:e="options.style must be an array > 0";break;case"function"!=typeof t.callback&&null!==t.callback&&void 0!==t.callback:e="options.callback must be a function, null or undefined"}return 0===e.length?t:{error:e}}}]),t}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();
var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"removeItemFromArray",value:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t}},{key:"removeItemsFromArray",value:function(e,n){var r=e;return n.forEach((function(e){r=t.removeItemFromArray(r,e)})),r}}]),t}(),l=(o.removeItemFromArray,o.removeItemsFromArray),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}
var c=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._defaults={element:{},interval:50,ignore:"-_,;:./()[]{}<>\\'\"`#$%&@â‚¬!?",style:void 0,callback:null},this._options=a.options(e),this._options.error)return this.throwError();this._options=e,this._settings=Object.assign({},this._defaults,this._options),this._message=this._settings.element.innerText.split(""),this._possible=[].concat(u(new Set(this._message))).sort().join(""),this._ignore=[].concat(u(new Set(this._settings.ignore.split("")))),this._possibleIgnore=l(this._possible.split(""),this._ignore).sort().join(""),this._element=this._settings.element,this._width=this._message.length,this._height=1,this._interval=this._settings.interval,this._possibleLength=this._possible.length,this._style=this._settings.style,this._styleLength=this._style?this._style.length:0,this._styleEnable=this._styleLength>0,this._index=0,this._matrix=[],this._x=0,this._random=1,this._callback=this._settings.callback,this._calledback=!1,this._run=!1,this._init=!1,this._start=!1}return h(t,[{key:"throwError",value:function(){throw new Error(this._options.error)}},{key:"isCallback",value:function(){return"function"==typeof this._callback&&!1===this._calledback}},{key:"char",value:function(t){var e=t?this._possible+this._message[this._x+1].repeat(Math.floor(this._possibleLength*this._random)):this._possibleIgnore;return e.charAt(Math.floor(Math.random()*e.length))}},{key:"charStyle",value:function(){return this._style?this._style[Math.floor(Math.random()*this._styleLength)]:""}},{key:"charCreate",value:function(t){var e="x"+t;return this._matrix[e]={element:this.charCreateElement(e)||{},x:t},!0}},{key:"charInit",value:function(t){var e="x"+t;return this._matrix[e].interval=this.charStart(e)||function(){return!1},this._run=!0,!0}},{key:"charCreateElement",value:function(t){var e=this.char(!1,t),n=document.createElement("span"),r=document.createTextNode(e);return n.appendChild(r),n.setAttribute("data-randext-char",t),this._styleEnable&&this.charStyle()&&n.setAttribute("data-randext-style",this.charStyle()),this._element.appendChild(n),n}},{key:"charIsLastChild",value:function(t){return this._x===this._width-1}},{key:"charUpdate",value:function(t){if(this._matrix[t]){var e=this._matrix[t].x===this._x+1,n=this.char(e);this.charUpdateElement(t,n),this.charUpdateStatus(t,n)}}},{key:"charUpdateElement",value:function(t,e){this._matrix[t]&&this._matrix[t].element&&(this._styleEnable&&this._matrix[t].element.setAttribute("data-randext-style",this.charStyle()),this._matrix[t].element.innerHTML=e)}},{key:"charUpdateStatus",value:function(t,e){this.charIsLastChild()?this.reset():!this.charMatch(t,e)||this.charActivate(t),this._message.length===this._index&&(this.charStop(t),this.isCallback()&&(this._calledback=this._callback()))}},{key:"charMatch",value:function(t,e){return!(!this.charMatchIndex(e)||!this.charMatchPosition(t))&&(this._debug&&console.log("next","x"+this._x,"c"+e),!0)}},{key:"charMatchIndex",value:function(t){return this._message[this._index]===t}},{key:"charMatchPosition",value:function(t){return!!this._matrix[t]&&(0===this._index&&this._x===this._matrix[t].x||0!==this._index&&this._x+1===this._matrix[t].x)}},{key:"charActivate",value:function(t){return!!this._matrix[t]&&(this._index=this._index+1,this._x=this._matrix[t].x,this.charStop(t),this._matrix[t].element.setAttribute("data-randext-char-active","true"),!0)}},{key:"charStop",value:function(t){return this._matrix[t]?clearInterval(this._matrix[t].interval):function(){return!1}}},{key:"charStart",value:function(t){var e=this;return setInterval((function(){e.charUpdate(t)}),2*Math.floor(Math.random()*this._interval))}},{key:"create",value:function(t){for(var e=0;e<this._width;e++)t?this.charInit(e):this.charCreate(e);return!0}},{key:"reset",value:function(t){var e=this;return this._element.innerHTML="",this.stop((function(){e.constructor(e._settings),t?e.init():e.start()})),!0}},{key:"stop",value:function(t){for(var e in this._matrix)this._matrix.hasOwnProperty(e)&&this._matrix[e].interval&&clearInterval(this._matrix[e].interval);return"function"==typeof t&&t(),!0}},{key:"start",value:function(){return this._init||this.init(),0!==this._index||this._run?this.reset(!0):this.create(!0),!0}},{key:"init",value:function(){return this._element.innerText="",0!==this._index||this._run?this.reset():this.create(),this._element.setAttribute("data-randext","true"),this._init=!0,!0}}]),t}();e.default=c}])}));